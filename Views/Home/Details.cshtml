@model Device

@{
  ViewData["Title"] = "Dashboard";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

@section AdditionalLinks {
  <li class="list-group-item pr-0 pl-0 d-none d-lg-block" style="  background-color: #201063">
    <a class="nav-link pl-0 dropdown-toggle  ml-3 " style="color: white; font-weight:bold;" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="true" aria-controls="collapseExample"><img src="~/Icons/dasboardplain.svg" alt="" /> <span class="d-none d-lg-inline"> Dashboard</span></a>
    <div class="collapse  " id="collapseExample">
      <a class="nav-link pl-3" style="color: white; font-weight:bold;  background-color:#150b42" asp-controller="Beon" asp-action="Dashboard" asp-route-IdDevice="@Model.DeviceId"><img src="~/Icons/earth.svg" alt="" /><span class="d-none d-lg-inline"> Overview</span></a>
      <a class="nav-link pl-3" style="color: white; font-weight:bold; background-color:#150b42" asp-controller="Beon" asp-action="Location1Device" asp-route-IdDevice="@Model.DeviceId"><img src="~/Icons/maps-and-location.svg" alt="" /> <span class="d-none d-lg-inline"> Location</span></a>
      <a class="nav-link pl-3" style="color: white; font-weight:bold;  background-color:#150b42" asp-controller="Beon" asp-action="Temp" asp-route-IdDevice="@Model.DeviceId"><img src="~/Icons/heat.svg" alt="" /><span class="d-none d-lg-inline"> Temperature</span></a>
    </div>
  </li>
}

<header class="border p-2 d-flex justify-content-between">
  <div class="d-none d-lg-block">
    <h3 class="text-left  "><img src="~/Icons/dashboardPict.svg" alt="" /> Dashboard</h3>
    <p class="text-left  m-0">@DateTime.Now</p>
  </div>
  <h2 class="text-center m-auto">
    <img src="~/Icons/aim.svg" alt="" /> Tracker @Model.DeviceId
  </h2>
  <p class="d-none d-lg-block">&ensp; </p>
</header>

<section class="d-flex flex-column-reverse flex-lg-row">
  <div class="container-fluid p-0 ">
    <article class="card-deck p-0  m-0 d-flex flex-column flex-lg-row justify-content-between">
     
        <last-contact :device_id="deviceId"/>
      
        <div class="card m-3">
        <div class="card-header pb-0" style=" color: #201063;">
          <h5 class="card-title" style="font-weight: bold;"><img src="~/Icons/warningBlueBeon.svg" alt="" /> Number of shocks</h5>
        </div>
        <div class="card-body ">
          <p class="card-text ">- total shocks:  </p>
          <p class="card-text ">- from last 72h:  </p>
          <p class="card-text ">- since last contact:  </p>
          <p class="card-text">- Max shock: g</p>
        </div>
      </div>

      <div>
        <temperature :device_id="deviceId" />
      </div>
      <div>
        <battery :device_id="deviceId" />
      </div>
    </article>



    <article class=" p-3 p-lg-0 m-auto d-flex flex-column flex-lg-row ">
      <div class="card m-auto m-lg-3 col-12 col-lg-5 p-0 " style="height:auto">
        <div class="card-header pb-0" style=" color: #201063;">
          <h5 class="card-title " style="font-weight: bold;"><a asp-controller="Beon" asp-action="Location1Device" asp-route-IdDevice="@Model.DeviceId" style="color: #201063;"><img src="~/Icons/mapBlueBeon.svg" alt="" /> Location</a></h5>
        </div>
        <div class="card-body">
          <div id="map"></div>
        </div>
      </div>

      <div class="col ml-lg-3 mr-lg-3 p-0" style="height:auto">
        <div class="card  mt-3 mb-3 col-12 p-0 ">
          <div class="card-header pb-0" style=" color: #201063;">
            <h5 class="card-title" style="font-weight: bold; "><a asp-controller="Beon" asp-action="Temp" asp-route-IdDevice="@Model.DeviceId" style="color: #201063;"><img src="~/Icons/heatBlueBeon.svg" alt="" /> Temperature</a></h5>
          </div>
          <div class="card-body">
            <div class="d-flex flex-column flex-lg-row justify-content-between ">
              <div class="text-center m-1">
                <button type="button" id="sortButton24" class="btn btn-success" onclick="UpdateChart24()">24h</button>
                <button type="button" id="sortButton72" class="btn btn-dark" onclick="UpdateChart72()">72h</button>
                <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSortByDate" aria-expanded="false" aria-controls="collapseSortByDate">
                  Between date
                </button>
              </div>

              <div class="collapse" id="collapseSortByDate">
                <div class="card card-body">
                  <div class="text-center d-flex flex-column flex-lg-row">
                    <div class="border m-1 p-1">
                      <p>Begin date:</p>
                      <label class="beginDate">
                        <input type="date" id="beginDate" name="beginDate" value="" />
                        <input type="time" id="beginTime" name="beginTime" value="" />
                      </label>
                    </div>
                    <div class="border m-1 p-1">
                      <p>End date:</p>
                      <label class="endDate">
                        <input type="date" name="endDate" id="endDate" value="">
                        <input type="time" id="endTime" name="endTime" value="" />
                      </label>
                    </div>
                  </div>
                  <button type="button" id="bouton" onclick="UpdateChartBetweenDate()">send</button>
                </div>
              </div>
            </div>
            <div class="" style="height:auto">
              <canvas id="tempsChart" class=" col-12" style="height:300px; "></canvas>
            </div>
          </div>
        </div>
      </div>
    </article>
  </div>
  <aside class="d-flex flex-column flex-lg-row-reverse m-3 m-lg-0 mt-lg-3 mb-lg-3 p-0  ">
    <div>
      <div class="h-100 p-0 mr-2 text-center">
        <a class="btn btn-light border h-100  " data-bs-toggle="collapse" href="#alertCollapse" role="button" aria-expanded="false" aria-controls="alertCollapse" onclick="ChangeArrow()">
          <span class="position-relative d-none d-lg-flex" style="top:50%;">
            <img src="~/Icons/left-arrow.svg" alt="" id="arrowLeft" /><img src="~/Icons/right-arrow.svg" alt="" class="d-none" id="arrowRight" />&nbsp
            <img src="~/Icons/notificationBell.svg" alt="" />
            <img src="~/Icons/notification.svg" alt="" />
          </span>
          <span class="position-relative d-flex flex-column-reverse d-lg-none " style="top:50%;">
            <img src="~/Icons/down-arrow.svg" alt="" id="arrowDown" /><img src="~/Icons/up-arrow.svg" alt="" class="d-none" id="arrowUp" />&nbsp
            <img src="~/Icons/notificationBell.svg" alt="" />
            <img src="~/Icons/notification.svg" alt="" />
          </span>
        </a>
      </div>
    </div>
    <div class="row" style="">
      <div class="col text-center">
        <div class="collapse" id="alertCollapse">
          <div class="card card-body" style="height: 80vh;  overflow-y: scroll;">
            <div class="card-body">
              <div>
                <p class="alertcolorred" style="width:max-content">
                  <button class="btn border-0 alertcolorred mw-100">
                    <img src="~/Icons/heatBlueBeon.svg" alt="" />
                    Temperature Alert  <br />  "
                  </button>
                </p>
              </div>
              <div>
                <p class="alertcolorgreen" style="width:max-content">
                  <button class="btn border-0 alertcolorgreen mw-100">
                    <img src="~/Icons/heatBlueBeon.svg" alt="" />
                    Temperature Alert Terminated   <br />
                  </button>
                </p>
              </div>
              <div>
                <p class="alertcolorblue " style="width:max-content">
                  <button class="btn border-0 alertcolorblue mw-100">
                    <img src="~/Icons/warningBlueBeon.svg" alt="">
                    Shock Alert    <br />
                  </button>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </aside>
</section>
</main>

@section Vue {
  <script>
    vueData = {
      data: function () {
        return {
          batteryLevel: undefined,
          deviceId: "@Model.DeviceId",
        }
      }
    }
  </script>
}

@section VueComponents {
  <partial name="VueComponents/Battery.VueComponent" />
  <partial name="VueComponents/Temperature.VueComponent" />
  <partial name="VueComponents/LastContact.VueComponent" />
} 